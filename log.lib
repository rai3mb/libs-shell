#!/bin/bash
#By: Raimundo Portela <rai3mb@gmail.com>
source "/opt/scripts/libs/util.lib"
_import date || return 1
HOJE=$(_dateNum)
_DIR_LOG=/opt/scripts/logs/$HOJE # directory for logs
[ ! -d $_DIR_LOG ] && mkdir -p $_DIR_LOG && chmod 2777 $_DIR_LOG # cria o diretorio de logs

_LOG_DESTINO=$_DIR_LOG/$(basename "$0")_${HOSTNAME}_$HOJE.log # arquivo de log para o script corrent
exec 2> >(tee -a "$_LOG_DESTINO") # copia a saida de erros para o arquivo

# funcao para registrar comentarios no log
_log() {
    echo "$1" && echo "$(_now)|$1" >> $_LOG_DESTINO
}
