#!/bin/bash
#By: Raimundo Portela <rai3mb@gmail.com>
source /opt/scripts/libs/date.lib || exit 1
HOJE=$(_dateNum)
DIR_LOG=/opt/scripts/logs/$HOJE # directory for logs
LOG_DESTINO=$DIR_LOG/$(basename "$0")_${HOSTNAME}_$HOJE.log # arquivo de log para o script corrent

[ ! -d $DIR_LOG ] && mkdir -p $DIR_LOG && chmod 2777 $DIR_LOG # cria o diretorio de logs
exec 2> >(tee -a "$LOG_DESTINO") # copia a saida de erros para o arquivo

# funcao para registrar comentarios no log
_log() {
        echo "$1" && echo "$(date +'%Y-%m-%d %H:%M:%S')|$1" >> $LOG_DESTINO
}
